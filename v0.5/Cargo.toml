[workspace]
members = [
    "fastn",
    "fastn-account",
    "fastn-ascii-renderer",
    "fastn-automerge",
    "fastn-automerge-derive",
    "fastn-compiler",
    "fastn-continuation",
    "fastn-id52",
    "fastn-mail",
    "fastn-net",
    "fastn-p2p",
    "fastn-package",
    "fastn-rig",
    "fastn-router",
    "fastn-section",
    "fastn-static",
    "fastn-unresolved",
    "fastn-update",
    "fastn-utils",
    "fastn-wasm",
    "fastn-net-test",
    "fastn-p2p-test",
    "fastn-cli-test-utils",
]
exclude = []
resolver = "2"

[workspace.package]
authors = [
    "Amit Upadhyay <upadhyay@gmail.com>",
    "Arpita Jaiswal <arpita@fifthtry.com>",
    "Siddhant Kumar <siddhant@fifthtry.com>",
]
edition = "2024"
description = "fastn: Full-stack Web Development Made Easy"
license = "UPL-1.0"
repository = "https://github.com/fastn-stack/fastn"
homepage = "https://fastn.com"
rust-version = "1.89"


[workspace.dependencies]
# Please do not specify a dependency more precisely than needed. If version "1" works, do
# not specify "1.1.42". This reduces the number of total dependencies. For example, if you
# specify 1.1.42 and someone else who only needed "1" also specified 1.1.37, we end up having
# the same dependency getting compiled twice.
#
# In the future, we may discover that our code does not indeed work with "1", say it only works
# for 1.1 onwards, or 1.1.25 onwards, in which case use >= 1.1.25 etc. Saying our code
# only works for 1.1.42 and not 1.1.41 nor 1.1.43 is really weird, and most likely wrong.
#
# If you are not using the latest version intentionally, please do not list it in this section
# and create its own [dependencies.<name>] section. Also, document it with why are you not
# using the latest dependency, and what is the plan to move to the latest version.

arcstr = "1"
argon2 = "0.5"
async-lock = "3"
async-stream = "0.3.6"
async-trait = "0.1"
base64 = "0.22"
# Using automerge 0.6.1 to match autosurgeon 0.8's dependency version
# TODO: Upgrade to automerge 1.0 once autosurgeon supports it
automerge = "0.6.1"
autosurgeon = "0.8"
bb8 = "0.9"
bytes = "1"
chrono = { version = "0.4", features = ["serde"] }
clap = { version = "4", features = ["derive"] }
colored = "3"
deadpool = "0.10"
deadpool-postgres = "0.12"
directories = "6"
fastn-account = { path = "fastn-account" }
fastn-automerge-derive = { path = "fastn-automerge-derive" }
fastn-automerge = { path = "fastn-automerge" }
fastn-builtins = { path = "../fastn-builtins" }
fastn-compiler = { path = "fastn-compiler" }
fastn-continuation = { path = "fastn-continuation" }
fastn-fbr = { path = "fastn-fbr" }
fastn-id52 = { path = "fastn-id52" }
fastn-mail = { path = "fastn-mail" }
fastn-net = { path = "fastn-net" }
fastn-p2p = { path = "fastn-p2p" }
fastn-package = { path = "fastn-package" }
fastn-resolved = { path = "../fastn-resolved" }
fastn-rig = { path = "fastn-rig" }
fastn-router = { path = "fastn-router" }
fastn-runtime = { path = "../fastn-runtime" }
fastn-section = { path = "fastn-section" }
fastn-unresolved = { path = "fastn-unresolved" }
fastn-utils = { path = "fastn-utils" }
ed25519-dalek = { version = "2.1.1", features = ["rand_core"] }
data-encoding = "2"
eyre = "0.6"
ft-sys-shared = { version = "0.2.1", features = ["rusqlite", "host-only"] }
futures-util = { version = "0.3", default-features = false, features = ["std"] }
futures-core = "0.3.31"
http = "1"
http-body-util = "0.1"
hyper = { version = "1.5.1", features = ["server", "http1"] }
hyper-util = { version = "0.1.10", features = ["tokio"] }
id-arena = "2"
ignore = "0.4"
indexmap = "2"
indoc = "2"
iroh = { version = "0.91", features = ["discovery-local-network"] }
keyring = "3"
lettre = "0.11"
libsqlite3-sys = "0.28.0"
magic-crypt = { version = "4", default-features = false }
once_cell = "1"
rand = "0.8.5"
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls"] }
scc = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
string-interner = "0.19"
tera = "1"
thiserror = "2"
tokio = { version = "1", features = ["macros", "rt-multi-thread", "fs", "sync"] }
tokio-postgres = { version = "0.7", features = ["with-serde_json-1", "with-uuid-1"] }
tokio-stream = "0.1"
tokio-util = "0.7"
tracing = "0.1"
tracing-subscriber = "0.3"
trait-variant = "0.1"
uuid = { version = "1", features = ["v4"] }
wasmtime = "36"

[workspace.dependencies.fastn-observer]
git = "https://github.com/fastn-stack/fastn-observer"
rev = "5f64c7b"

[workspace.dependencies.rusqlite]
version = "0.31"
features = [
    # We are using the bundled version of rusqlite, so we do not need sqlitelib, headers as a
    # dependency. By default, if we do not bundle, our binary will link against system
    # provided sqlite, which would have been a good thing, if we used system sqlite, our
    # binary size would be smaller, compile time lesser, but unfortunately we can not assume
    # sqlite dynamic library is installed on everyone's machine. We can choose to give two
    # binaries, one with bundled, one without, but it is not worth the tradeoff right now.
    "bundled",
    "column_decltype",
]
