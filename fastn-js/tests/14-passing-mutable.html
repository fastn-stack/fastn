<html>
<head>
    <script src="../js/dom.js"></script>
    <script src="../js/fastn.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/virtual.js"></script>
    <script src="../js/ftd.js"></script>
    <script src="../js/postInit.js"></script>
</head>
<body></body>
<script>
    (function() {
        function main (root) {
            let x = fastn.mutable(30);
            let y = fastn.mutable(20);
            let z = fastn.mutable(10);

            let i1 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Integer);
            i1.setProperty(fastn_dom.PropertyKind.IntegerValue, x);

            let i2 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Integer);
            i2.setProperty(fastn_dom.PropertyKind.IntegerValue, y);

            let i3 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Integer);
            i3.setProperty(fastn_dom.PropertyKind.IntegerValue, z);


            let i4 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Text);
            i4.setProperty(fastn_dom.PropertyKind.StringValue, "Remap x to y");
            i4.addEventHandler(fastn_dom.Event.Click, function () {
                x.set(y);
            })


            let i5 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Text);
            i5.setProperty(fastn_dom.PropertyKind.StringValue, "Remap y to z");
            i5.addEventHandler(fastn_dom.Event.Click, function () {
                y.set(z);
            })


            let i6 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Text);
            i6.setProperty(fastn_dom.PropertyKind.StringValue, "Set x to 40");
            i6.addEventHandler(fastn_dom.Event.Click, function () {
                x.set(40);
            })

            let i7 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Text);
            i7.setProperty(fastn_dom.PropertyKind.StringValue, "Set y to 50");
            i7.addEventHandler(fastn_dom.Event.Click, function () {
                y.set(50);
            })

            let i8 = fastn_dom.createKernel(root, fastn_dom.ElementKind.Text);
            i8.setProperty(fastn_dom.PropertyKind.StringValue, "Set z to 60");
            i8.addEventHandler(fastn_dom.Event.Click, function () {
                z.set(60);
            })
        }

        document.body.innerHTML = fastn_virtual.ssr(main);
        fastn_virtual.doubleBuffer(main);
    })();
</script>
</html>


<!--
-- integer $x: 30
-- integer $y: 20
-- integer $z: 10

-- ftd.integer: $x
-- ftd.integer: $y
-- ftd.integer: $z

-- ftd.text: Remap x to y
$on-click$: { x = y }

-- ftd.text: Remap y to z
$on-click$: { y = z }

-- ftd.text: Set x to 40
$on-click$: { x = 40 }

-- ftd.text: Set y to 50
$on-click$: { y = 50 }

-- ftd.text: Set z to 60
$on-click$: { z = 60 }
-->
